{% extends "zerver/base.html" %}

{% block customhead %}
{% stylesheet 'portico' %}
{% endblock %}

{% block content %}
<div class="app portico-page">

{{ minified_js('stats')|safe }}
{% stylesheet 'stats' %}

<div class="page-content">
  <div id="id_stats_errors" class="alert alert-error"></div>
  <h1 class="analytics-page-header">Zulip Analytics for {{ realm_name }}</h1>
  <div class="center-container">
    <div class="center-block">
      <p class="graph-title" id="messages_timescale_anchor">Messages Sent Over Time</p>
      <div id="graph_container">
        <div id="button_container">
          <p id="button_label"> Aggregation </p>
          <button class="button" type="button" id='hourly_button'> Hourly </button>
          <button class="button" type="button" id='daily_button'> Daily </button>
          <button class="button" type="button" id='weekly_button'> Weekly </button>
          <button class="button" type="button" id='cumulative_button'> Cumulative </button>
        </div>
        <div id="id_messages_sent_over_time"></div>
        <div id="hoverinfo">
            <span id="hover_date"></span>
            <span id="hover_me">Me:</span>
            <span id="hover_me_value"></span>
            <span id="hover_human">Humans:</span>
            <span id="hover_human_value"></span>
            <span id="hover_bot">Bots:</span>
            <span id="hover_bot_value"></span>
        </div>
      </div>
    </div>
  </div>
  <div id="pie_container">
    <div id="pie_messages_sent_by_client">
      <p class="graph-title" id="messages_by_client_anchor">Messages Sent by Client</p>
      <div id="id_messages_sent_by_client"></div>
      <button class="pie-button" type="button" id='messages_by_client_user_button'> Me </button>
      <button class="pie-button" type="button" id='messages_by_client_realm_button'> Everyone </button>
      <button class="pie-button" type="button" id='messages_by_client_last_week_button'> Last Week </button>
      <button class="pie-button" type="button" id='messages_by_client_last_month_button'> Last Month </button>
      <button class="pie-button" type="button" id='messages_by_client_last_year_button'> Last Year </button>
      <button class="pie-button" type="button" id='messages_by_client_cumulative_button'> All Time </button>
    </div>
    <div id="pie_messages_sent_by_type">
      <p class="graph-title" id="messages_by_type_anchor">Messages Sent by Recipient Type</p>
      <div id="id_messages_sent_by_message_type"></div>
      <div id="pie_messages_sent_by_type_total"> </div>
      <button class="pie-button" type="button" id='messages_by_type_user_button'> Me </button>
      <button class="pie-button" type="button" id='messages_by_type_realm_button'> Everyone </button>
      <button class="pie-button" type="button" id='messages_by_type_last_week_button'> Last Week </button>
      <button class="pie-button" type="button" id='messages_by_type_last_month_button'> Last Month </button>
      <button class="pie-button" type="button" id='messages_by_type_last_year_button'> Last Year </button>
      <button class="pie-button" type="button" id='messages_by_type_cumulative_button'> All Time </button>
    </div>
  </div>
  <div class="center-container">
    <div class="center-block">
      <p class="graph-title" id="users_anchor">Active Users</p>
      <div id="id_number_of_users"></div>
      <div id="users_hover_info">
        <span id="users_hover_date"></span>
        <span id="users_hover_humans">Users:</span>
        <span id="users_hover_humans_value"></span>
      </div>
    </div>
  </div>
  <div class="center-container">
    <div class="center-block">
      <p class="last-update">
        Last Update: <span id="id_last_full_update"></span>
        <span data-toggle="tooltip" title="{{ _('A full update of all the graphs happens once a day.<br/> The “Messages Sent Over Time” graph is updated once an hour.') }}">
          <span class="icon-vector-question-sign" id="id_last_update_question_sign"></span>
        </span>
      </p>
    </div>
  </div>
</div>

</div>
{% endblock %}
