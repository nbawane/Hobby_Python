<p>
    Zulip supports both Git and Mercurial notifications from
    Bitbucket. This integration is for the old-style Bitbucket
    webhooks used by Bitbucket Enterprise.
</p>

<p>
    First, create the stream you'd like to use for Bitbucket notifications,
    and subscribe all interested parties to this stream. The integration will
    use the default stream <code>commits</code> if no stream is supplied in the
    hook; you still need to create the stream even if you are using this
    default.
</p>

<p>
    Next, from your repository's web page, go to the Administration page and choose Hooks on the left-hand side.
    Choose the <code>POST</code> hook from the list presented and click "Add hook." Make sure to replace the
    <code>@</code> in the bot's email address with <code>%40</code>,
    as Bitbucket will not execute the hook if the username contains a <code>@</code>.
</p>

<p>
    In the URL field, enter
    <code>{{ external_uri_scheme }}bot_email:bot_api_key@{{ external_api_path_subdomain }}/v1/external/bitbucket</code>
</p>
<p>
    Or, you can also limit the notifications you receive to specific
    branches by specifying them in a comma-separated list at the end
    of the URL, like so:
</p>
<p><code>{{ external_uri_scheme }}bot_email:bot_api_key@{{ external_api_path_subdomain }}/v1/external/bitbucket?branches=master,development</code></p>
<img class="screenshot" src="/static/images/integrations/bitbucket/001.png"/>

<p>
    By default, notifications are sent to the <code>commits</code> stream.
    To send notifications to a different stream,
    append <code style="white-space: nowrap;">?stream=stream_name</code> to
    the URL.
</p>

<p>
    <b>Congratulations! You're done!</b><br/> Whenever you push code to your repository,
    you'll get an automated notification that looks like this:
</p>
<img class="screenshot" src="/static/images/integrations/bitbucket/002.png"/>
